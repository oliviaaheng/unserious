---
import Layout from "../layouts/Layout.astro";
import PageHeader from "../components/PageHeader.astro";
import ActivityCard from "../components/ActivityCard.astro";
import PairDivider from "../components/PairDivider.astro";
import ComparisonCounter from "../components/ComparisonCounter.astro";
import ResetButton from "../components/ResetButton.astro";
---

<Layout>
  <Fragment slot="head">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600&family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
  </Fragment>

  <main
    class="min-h-screen px-5 pb-12 pt-10 sm:px-8 lg:px-14"
    data-activities=""
  >
    <div class="mx-auto flex max-w-5xl flex-col gap-8">
      <PageHeader
        label="Destination Picks"
        title="What do you prefer?"
        description="Two quick choices at a time. We'll learn your favorites as you go."
      />

      <section
        class="relative grid grid-cols-1 gap-4 sm:gap-6 md:grid-cols-2 md:gap-8"
        aria-live="polite"
        data-pair
      >
        <ActivityCard choice="a" />
        <PairDivider />
        <ActivityCard choice="b" />
      </section>

      <footer class="flex flex-col gap-4">
        <ComparisonCounter />
        <ResetButton />
      </footer>

      <section class="flex flex-col items-center gap-4 rounded-3xl border border-white/60 bg-white/80 p-6 shadow-[0_30px_80px_-50px_rgba(53,36,24,0.7)] backdrop-blur sm:p-8">
        <p class="text-sm text-[#7f6b5c]">Done comparing? We recommend at least 10 comparisons.</p>
        <button
          id="generate-itinerary-btn"
          type="button"
          class="inline-flex items-center justify-center rounded-full bg-[#d9824c] px-6 py-3 text-sm font-semibold uppercase tracking-[0.15em] text-white shadow-[0_12px_28px_-18px_rgba(86,45,18,0.8)] transition hover:-translate-y-0.5 hover:bg-[#c7723b] hover:shadow-[0_16px_32px_-20px_rgba(86,45,18,0.9)] focus:outline-none focus:ring-2 focus:ring-[#e6b587]"
        >
          Generate Itinerary
        </button>
        <p id="ranking-error" class="hidden text-sm font-medium text-red-600"></p>
      </section>
    </div>
  </main>

  <div id="loading-overlay" class="loading-overlay hidden">
    <div class="loading-rings">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <p id="loading-flavor" class="loading-flavor"></p>
  </div>

  <script>
    import "../scripts/ranking";
  </script>

</Layout>
